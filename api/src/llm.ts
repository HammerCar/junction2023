import { Ollama } from "langchain/llms/ollama"

const ollama = new Ollama({
  baseUrl: process.env.OLLAMA_URL || "http://localhost:11434",
  model: "llama2",
})

export default async function call(prompt: string) {
  console.log("Loading model...")

  const stream = await ollama.stream(
    prompt + "\n\nIs this article relevant to steel manufacturer trying to find new leads? (y/n): ",
    {
      stop: ["\n\n"],
    }
  )

  console.log("Model loaded.")

  const chunks = []
  for await (const chunk of stream) {
    console.log(JSON.stringify(chunk))
    chunks.push(chunk)
  }

  console.log(chunks.join(""))
}

/*
call(
  'The Regional Commissioner has submitted a proposal to the Principal Secretary, Revenue Department, Government of Karnataka, seeking the transfer of 26.31 acres of land for the construction of the stadium\n\nThe proposed cricket stadium of international standards in Mysuru pending for years has inched a step closer to becoming a reality. The Regional Commissioner has submitted a proposal to the Principal Secretary, Revenue Department, Government of Karnataka, in an official format, seeking the transfer of 26.31 acres of land for the construction of the stadium.\n\nThe land is in Huyilalu village in Yelwal Hobli on the outskirts of Mysuru and the Regional Commissioner has sought that the government land be transferred to Karnataka State Cricket Association, Bengaluru. This followed a requisition by the Deputy Commissioner of Mysuru and the said land is on Survey numbers 312 and 313 and the area is spread over 26.31 acres.\n\nThe RC has also cited a report of the local tahshildar that the vacant land was not registered in the name of anyone and was classified as government kharab land and was suitable for the proposed stadium. The location is within 9 km of the city and was well connected. Besides, there were no legal hurdles with respect to the identified land nor was it entangled in any case over ownership dispute and was hence free of encumbrance while the cost per acre has been pegged at ₹30 lakh.\n\nThe proposal for an international standard cricket stadium in Mysuru has been pending for years and Pratap Simha, MP, has also conducted a series of meetings with the revenue department and KSCA officials in this regard. The KSCA had sent the proposal nearly 10 years ago for the stadium in the city though the issue gained traction with Mr. Simha taking the initiative to clear the hurdles for land transfer. But in June this year, the district in-charge Minister H.C. Mahadevappa had also claimed that the proposal was first made when Congress was at the helm of affairs between 2013 and 2018 and he was apprised of the requirements by former international cricketers Javagal Srinath and Anil Kumble.\n\nHowever, the concept gained traction only during the last two years and land was initially cleared at Sathgalli on the outskirts of the city. But it transpired that there were a couple of waterbodies close to the land and any construction work could result in legal hurdles.\n\nWelcoming the developments, senior sports journalist C.K. Muralidharan said an international-level stadium in the city will give more exposure to the local talent as more cricket matches with international teams touring India, can be conducted. At present, Srikantadatta Narasimharaja Wadiyar Ground, earlier known as Gangotri Glades, at the Manasagangotri campus of the University of Mysore, hosts a few matches of national level but the ground is small. The Ranji Trophy finals was also held here a few years ago, said Mr. Muralidharan.\n\nFor a tier-2 city, Mysuru has sufficient sporting facilities including the Chamundi Vihar Sports Complex which is a multipurpose stadium with an international-level swimming pool, astroturf hockey ground, synthetic track for athletics, indoor basketball and volleyball court, etc. But it is perceived that an international-level cricket stadium will provide a booster shot for sports in the city. Israel must act against what terrorist have the ability to do, not what it expects the terrorists to try to do.\n\nThe top of the IDF is engaged in analyzing the new reality that has emerged in the Gaza Strip and led to the collapse of defense in the Gaza District and Southern Command.\n\nThe ones fully responsible for shaping the space and defense posture on the southern front are primarily the current Chief of Staff, Lieutenant General Aviv Kohavi, who was previously the commander of the Southern Command and head of the Military Intelligence Directorate, and the head of the Strategy and Third-Circle Directorate, Major General Eliezer Toledano, who was the commander of the Southern Command until two months ago and previously the commander of the Gaza Division.\n\nThe security establishment created a system that focuses on acting against the intentions of terrorist organizations rather than acting against their capabilities.\n\nWhile Hamas has evolved from an organization to a terrorist army, the Southern Command and other parts of the army believed that the intelligence suitable for continuous security activity would not disappoint and would provide the expected warning for war.\n\nThe opposite happened. The intelligence system and the capabilities of the military\'s top echelons did not function. Even though they saw the threat looming before them, they did not grasp the magnitude of the danger.\n\nThere is no doubt that something went wrong in terms of gathering information and processing it for understanding the reality. "It\'s more than a lapse in attention," explain intelligence sources. "It\'s an accumulating problem when an organization relies on various alerts and insights from above in many ways. That\'s how it becomes complacent." An intelligence source explains that everything that came from below seemed unimportant because it did not align with the analyses "from above. There is no other way to explain the gaps that emerged."\n\nOperating against capabilities, not intentions\n\nTherefore, there is no alternative but for the new system built against Gaza to operate against capabilities rather than intentions. Advertisement\n\nConsiderable criticism has been voiced about the "Hourglass" system, the construction of which along 64 km in the Gaza Strip cost billions of shekels.\n\nRepeated attempts in recent years by thousands of Palestinians to breach the fence made it clear that it is a fence for continuous security activity, not a fence for war. Any explosive charge or small drone could render the entire system useless. Everyone saw it, but no one in the General Staff thought to respond to the extreme scenario of a war that could erupt from Palestinian anger fueled by incitement and incessant brainwashing by Hamas.\n\nThe IDF needs to uproot the very idea of using deterrence. Terrorist organizations act against Israel for internal ideological and political interests as well as due to external pressures, like Iranian patronage.\n\nHezbollah, Hamas, and Islamic Jihad do not act against Israel because they think the IDF is weak. On the contrary, the fact that the IDF is the strongest in the Middle East does not prevent them from attacking Israel. A terrorist organization operates because of internal interests, not because someone else is weak.\n\nDeterrence is relevant only when the IDF poses a credible and direct threat to the survival of the organization or its leadership. Only then can it prevent terrorist organizations from doing what they want.\n\nWhen Hezbollah understands that there is a direct and immediate threat to its leadership and its survival, it will consider whether to stop firing towards Israel. Until then, it will continue to shed the blood of IDF soldiers and Israeli civilians along the border.\n\nDefense Minister Yoav Gallant has appointed a team to focus on the day after the war - how to design an exit mechanism and the direction Israel should take militarily in the Gaza Strip.\n\nSince it is already clear that there was no choice but to work against the capabilities of Hamas, not just its intentions, calls are growing in the security establishment, including the IDF, to eliminate the phenomenon of tunnels that led to the insane military buildup of Hamas in all areas. In parallel, forces are being consolidated that, after the war, will carry out a series of operations similar to the day after Operation Protective Edge.\n\nThis, of course, would come after reassessing the deep-rooted military combat systems on the ground and in the command and control centers.'
)
*/

//const input =
//  'The Regional Commissioner has submitted a proposal to the Principal Secretary, Revenue Department, Government of Karnataka, seeking the transfer of 26.31 acres of land for the construction of the stadium\n\nThe proposed cricket stadium of international standards in Mysuru pending for years has inched a step closer to becoming a reality. The Regional Commissioner has submitted a proposal to the Principal Secretary, Revenue Department, Government of Karnataka, in an official format, seeking the transfer of 26.31 acres of land for the construction of the stadium.\n\nThe land is in Huyilalu village in Yelwal Hobli on the outskirts of Mysuru and the Regional Commissioner has sought that the government land be transferred to Karnataka State Cricket Association, Bengaluru. This followed a requisition by the Deputy Commissioner of Mysuru and the said land is on Survey numbers 312 and 313 and the area is spread over 26.31 acres.\n\nThe RC has also cited a report of the local tahshildar that the vacant land was not registered in the name of anyone and was classified as government kharab land and was suitable for the proposed stadium. The location is within 9 km of the city and was well connected. Besides, there were no legal hurdles with respect to the identified land nor was it entangled in any case over ownership dispute and was hence free of encumbrance while the cost per acre has been pegged at ₹30 lakh.\n\nThe proposal for an international standard cricket stadium in Mysuru has been pending for years and Pratap Simha, MP, has also conducted a series of meetings with the revenue department and KSCA officials in this regard. The KSCA had sent the proposal nearly 10 years ago for the stadium in the city though the issue gained traction with Mr. Simha taking the initiative to clear the hurdles for land transfer. But in June this year, the district in-charge Minister H.C. Mahadevappa had also claimed that the proposal was first made when Congress was at the helm of affairs between 2013 and 2018 and he was apprised of the requirements by former international cricketers Javagal Srinath and Anil Kumble.\n\nHowever, the concept gained traction only during the last two years and land was initially cleared at Sathgalli on the outskirts of the city. But it transpired that there were a couple of waterbodies close to the land and any construction work could result in legal hurdles.\n\nWelcoming the developments, senior sports journalist C.K. Muralidharan said an international-level stadium in the city will give more exposure to the local talent as more cricket matches with international teams touring India, can be conducted. At present, Srikantadatta Narasimharaja Wadiyar Ground, earlier known as Gangotri Glades, at the Manasagangotri campus of the University of Mysore, hosts a few matches of national level but the ground is small. The Ranji Trophy finals was also held here a few years ago, said Mr. Muralidharan.\n\nFor a tier-2 city, Mysuru has sufficient sporting facilities including the Chamundi Vihar Sports Complex which is a multipurpose stadium with an international-level swimming pool, astroturf hockey ground, synthetic track for athletics, indoor basketball and volleyball court, etc. But it is perceived that an international-level cricket stadium will provide a booster shot for sports in the city. Israel must act against what terrorist have the ability to do, not what it expects the terrorists to try to do.\n\nThe top of the IDF is engaged in analyzing the new reality that has emerged in the Gaza Strip and led to the collapse of defense in the Gaza District and Southern Command.\n\nThe ones fully responsible for shaping the space and defense posture on the southern front are primarily the current Chief of Staff, Lieutenant General Aviv Kohavi, who was previously the commander of the Southern Command and head of the Military Intelligence Directorate, and the head of the Strategy and Third-Circle Directorate, Major General Eliezer Toledano, who was the commander of the Southern Command until two months ago and previously the commander of the Gaza Division.\n\nThe security establishment created a system that focuses on acting against the intentions of terrorist organizations rather than acting against their capabilities.\n\nWhile Hamas has evolved from an organization to a terrorist army, the Southern Command and other parts of the army believed that the intelligence suitable for continuous security activity would not disappoint and would provide the expected warning for war.\n\nThe opposite happened. The intelligence system and the capabilities of the military\'s top echelons did not function. Even though they saw the threat looming before them, they did not grasp the magnitude of the danger.\n\nThere is no doubt that something went wrong in terms of gathering information and processing it for understanding the reality. "It\'s more than a lapse in attention," explain intelligence sources. "It\'s an accumulating problem when an organization relies on various alerts and insights from above in many ways. That\'s how it becomes complacent." An intelligence source explains that everything that came from below seemed unimportant because it did not align with the analyses "from above. There is no other way to explain the gaps that emerged."\n\nOperating against capabilities, not intentions\n\nTherefore, there is no alternative but for the new system built against Gaza to operate against capabilities rather than intentions. Advertisement\n\nConsiderable criticism has been voiced about the "Hourglass" system, the construction of which along 64 km in the Gaza Strip cost billions of shekels.\n\nRepeated attempts in recent years by thousands of Palestinians to breach the fence made it clear that it is a fence for continuous security activity, not a fence for war. Any explosive charge or small drone could render the entire system useless. Everyone saw it, but no one in the General Staff thought to respond to the extreme scenario of a war that could erupt from Palestinian anger fueled by incitement and incessant brainwashing by Hamas.\n\nThe IDF needs to uproot the very idea of using deterrence. Terrorist organizations act against Israel for internal ideological and political interests as well as due to external pressures, like Iranian patronage.\n\nHezbollah, Hamas, and Islamic Jihad do not act against Israel because they think the IDF is weak. On the contrary, the fact that the IDF is the strongest in the Middle East does not prevent them from attacking Israel. A terrorist organization operates because of internal interests, not because someone else is weak.\n\nDeterrence is relevant only when the IDF poses a credible and direct threat to the survival of the organization or its leadership. Only then can it prevent terrorist organizations from doing what they want.\n\nWhen Hezbollah understands that there is a direct and immediate threat to its leadership and its survival, it will consider whether to stop firing towards Israel. Until then, it will continue to shed the blood of IDF soldiers and Israeli civilians along the border.\n\nDefense Minister Yoav Gallant has appointed a team to focus on the day after the war - how to design an exit mechanism and the direction Israel should take militarily in the Gaza Strip.\n\nSince it is already clear that there was no choice but to work against the capabilities of Hamas, not just its intentions, calls are growing in the security establishment, including the IDF, to eliminate the phenomenon of tunnels that led to the insane military buildup of Hamas in all areas. In parallel, forces are being consolidated that, after the war, will carry out a series of operations similar to the day after Operation Protective Edge.\n\nThis, of course, would come after reassessing the deep-rooted military combat systems on the ground and in the command and control centers.'

//call(input.substring(0, 1000)).catch(console.error)
